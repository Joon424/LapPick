<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="imagetoolbar" content="no">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="format-detection" content="telephone=no">
  <meta name="title" content="웹사이트">
  <meta name="description" content="웹사이트입니다.">
  <meta name="keywords" content="키워드,키워드,키워드">
  <meta property="og:title" content="웹사이트">
  <meta property="og:description" content="웹사이트입니다">
  <meta property="og:image" content="https://웹사이트/images/opengraph.png">
  <meta property="og:url" content="https://웹사이트">
  <title>직원_상품관리 | Miso</title>
  <script src="/static/js/cartButton.js"></script>
  <link rel="stylesheet"  href="/resources/css/setting.css">
  <link rel="stylesheet"  href="/resources/css/plugin.css">
  <link rel="stylesheet"  href="/resources/css/template.css">
  <link rel="stylesheet"  href="/resources/css/common.css">
  <link rel="stylesheet"  href="/resources/css/style.css">
  <style>
    table { table-layout: fixed; width: 100%; border-collapse: collapse; }
    th, td { 
        vertical-align: middle; padding: 10px 8px; 
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
        border-left: none;
        border-right: none;
    }
    thead tr { background: #f9fafb; }
    /* [삭제] 아래 tbody tr:hover 스타일이 회색 효과의 원인이므로 삭제했습니다. */
    /* tbody tr:hover { background: #f5f5f5; } */
    .manage-btn {
        display: inline-block; padding: 5px 10px; font-size: 12px;
        text-align: center; text-decoration: none; color: #333;
        background-color: #fff; border: 1px solid #ccc; border-radius: 4px;
        cursor: pointer; margin: 0 2px; white-space: nowrap;
    }
    .manage-btn:hover { background-color: #f0f0f0; border-color: #bbb; }
    .pagination-container .page-btn {
        display: inline-block; min-width: 32px; padding: 6px 10px;
        font-size: 13px; font-weight: 500; text-align: center; text-decoration: none;
        color: #333; background-color: #fff; border: 1px solid #ddd;
        border-radius: 4px; cursor: pointer; transition: background-color 0.2s;
    }
    .pagination-container .page-btn:hover { background-color: #f5f5f5; }
    .pagination-container .page-btn.active {
        background-color: #333; color: #fff; border-color: #333; font-weight: bold;
    }
</style>
</head>

<body>
  <!-- [S]basic-N3 -->
  <div class="basic-N3" data-bid="ow11u4ESzXm">
    <div class="header-inner">
      <div class="header-container container-lg">
        <div class="header-left">
          <h1 class="header-title">
            <a href="/">
              <img  src="/resources/images/img_logo_black.png" alt="로고">
            </a>
          </h1>
          <div class="header-mobile-group">
            <div class="header-mobile-top">
              <p>로그인이 필요합니다.</p>
              <a href="javascript:void(0)">로그인</a>
            </div>
                       <ul class="header-gnblist">
              <li class="header-gnbitem">
                <a class="header-gnblink" href="/banner/brand">
                  <span>BRAND</span>
                </a>
              </li>
              <li class="header-gnbitem">
                <a class="header-gnblink" href="/goods/goodsFullList">
                  <span>PRODUCTS</span>
                </a>
              </li>
              <li class="header-gnbitem">
                <a class="header-gnblink" href="/banner/notice">
                  <span>NOTICE</span>
                </a>
              </li>
              <li class="header-gnbitem">
                <a class="header-gnblink" href="/banner/faq">
                  <span>FAQ</span>
                </a>
              </li>
          <li class="header-gnbitem">
  <a class="header-gnblink" 
     th:href="${isLoggedIn} ? @{/logout} : @{/login/item.login}">
    <span th:text="${isLoggedIn} ? 'LOGOUT' : 'LOGIN'"
          th:style="${isLoggedIn} ? 'color: red;' : ''">LOGIN</span>
  </a>
</li>

            </ul>
            <button class="header-btn btn-close">
              <img  src="/resources/icons/ico_close_white.svg" alt="닫기 아이콘">
            </button>
          </div>
        </div>
        <div class="header-right">
          <div class="header-utils">
            <button class="header-btn btn-seach">
              <img  src="/resources/icons/ico_seach_black.svg" alt="검색 아이콘">
            </button>
            <a href="/login/userIcon" class="header-btn btn-user" id="user-icon">
              <img  src="/resources/icons/ico_user_black.svg" alt="유저 아이콘">
            </a>
            <button class="header-btn btn-cart badgeset badgeset-circle badgeset-position badgeset-bottom-right">
              <img  src="/resources/icons/ico_cart_black.svg" alt="쇼핑백 아이콘">
              <span class="badgeset-text">1</span>
            </button>
            <button class="header-btn btn-allmenu">
              <img  src="/resources/icons/ico_menu2_black.svg" alt="PC메뉴 아이콘">
            </button>
            <button class="header-btn btn-momenu">
              <img  src="/resources/icons/ico_menu2_black.svg" alt="모바일메뉴 아이콘">
            </button>
            <button class="header-btn btn-close">
              <img  src="/resources/icons/ico_close_black.svg" alt="닫기 아이콘">
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="header-dim"></div>
  </div>
<!-- [E]basic-N3 -->
 <main class="th-layout-main">
        <div class="basic-N23" data-bid="cE2cZu89X4e">
            <div class="contents-inner">
                <div class="contents-container container-md">

                    <div class="textset" style="margin-bottom:14px;">
                        <img class="imageset-img" src="/resources/images/img_basic_N23_1.png" alt="이미지">
                        <h2 class="textset-tit">상품 관리</h2>
                        <p class="textset-desc">상품의 추가, 수정, 삭제를 관리하며, 상품 정보와 재고 상태를 업데이트하는 페이지입니다.</p>
                    </div>

                    <div style="display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap; margin:10px 0 16px;">
                        <form th:action="@{/goods/list}" method="get" style="display:flex; gap:8px; align-items:center;">
                            <input type="text" name="searchWord" th:value="${filter?.searchWord}" placeholder="상품명 또는 상품번호 검색" style="height:36px; padding:0 10px; border:1px solid #cbd5e1; border-radius:6px; min-width:240px;">
                            <button type="submit" class="btnset btnset-line btnset-round">검색</button>
                            <a class="btnset btnset-line btnset-round" th:href="@{/goods/list}">전체보기</a>
                        </form>
                        <div style="display:flex; gap:8px;">
                            <a class="btnset btnset-line btnset-round" th:href="@{/goods/add}">상품등록</a>
                            <button type="button" class="btnset btnset-line btnset-round" onclick="submitBulkDelete()">선택삭제</button>
                        </div>
                    </div>

                    <form id="bulkDeleteForm" th:action="@{/goods/delete}" method="post">
                       <table>
    <thead>
        <tr>
            <th style="width: 48px;"><input type="checkbox" id="checkAll" onclick="toggleAll(this)"></th>
            <th style="width: 70px;">번호</th>
            <th style="width: 220px;">상품번호</th>
            <th>상품명</th>
            <th style="width: 120px; text-align: center;">가격</th>
            <th style="width: 140px; text-align: center;">등록일</th>
            <th style="width: 200px; text-align: center;">관리</th>
        </tr>
    </thead>
    <tbody>
        <tr th:if="${#lists.isEmpty(goodsList)}">
            <td colspan="7" style="text-align:center; padding:20px; color:#666;">표시할 상품이 없습니다.</td>
        </tr>
        <tr th:each="goods, stat : ${goodsList}">
            <td style="text-align:center;"><input type="checkbox" name="nums" th:value="${goods.goodsNum}"></td>
            <td style="text-align:center;" th:text="${(pageData.page - 1) * pageData.size + stat.count}"></td>
            <td th:text="${goods.goodsNum}"></td>
            <td th:text="${goods.goodsName}"></td>
            <td style="text-align: center;" th:text="${#numbers.formatInteger(goods.goodsPrice, 0, 'COMMA')} + '원'"></td>
            <td style="text-align:center;" th:text="${#dates.format(goods.goodsDate, 'yyyy-MM-dd')}"></td>
            <td>
                <div style="display: flex; justify-content: center; align-items: center; gap: 4px;">
                    <a class="manage-btn" th:href="@{/goods/{num}(num=${goods.goodsNum})}">상세</a>
                    <a class="manage-btn" th:href="@{/goods/{num}/edit(num=${goods.goodsNum})}">수정</a>
                    <button type="button" class="manage-btn" th:data-goods-num="${goods.goodsNum}" onclick="deleteSingleItem(this)">삭제</button>
                </div>
            </td>
        </tr>
    </tbody>
</table>
                    </form>

                    <div class="pagination-container" style="display:flex; gap:6px; justify-content:center; align-items:center; margin-top:20px;"
                         th:if="${pageData != null and pageData.total > 0 and pageData.startPage != null and pageData.endPage != null}">
                        <a class="page-btn" th:href="@{/goods/list(page=${pageData.startPage - 1}, searchWord=${filter?.searchWord})}" th:if="${pageData.hasPrev}">이전</a>
                        <a class="page-btn" th:each="i : ${#numbers.sequence(pageData.startPage, pageData.endPage)}" th:text="${i}"
                           th:classappend="${pageData.page == i} ? 'active' : ''"
                           th:href="@{/goods/list(page=${i}, searchWord=${filter?.searchWord})}"></a>
                        <a class="page-btn" th:href="@{/goods/list(page=${pageData.endPage + 1}, searchWord=${filter?.searchWord})}" th:if="${pageData.hasNext}">다음</a>
                    </div>
                </div>
            </div>
        </div>
    </main>
  <!-- [S]basic-N4 -->
  <div class="basic-N4" data-bid="DB4JlD9e4fN">
    <div class="footer-inner">
      <div class="footer-container container-lg">
        <div class="footer-top">
          <h1 class="footer-logo">
            <a href="javascript:void(0)">
              <img  src="/resources/images/img_logo_lightgray.png" alt="로고">
            </a>
          </h1>
   <ul class="footer-menulist">
            <li class="footer-menuitem">
              <a href="javascript:void(0)">
                <span>이용약관</span>
              </a>
            </li>
            <li class="footer-menuitem">
              <a href="javascript:void(0)">
                <span>개인정보처리방침</span>
              </a>
            </li>
            <li class="footer-menuitem">
              <a href="javascript:void(0)">
                <span>국비교육</span>
              </a>
            </li>
            <li class="footer-menuitem">
              <a href="javascript:void(0)">
                <span>미니프로젝트</span>
              </a>
            </li>
          </ul>
          <ul class="footer-snslist">
            <li class="footer-snsitem">
              <a class="footer-snslink" href="javascript:void(0)">
                <img  src="/resources/icons/ico_instagram_lightgrey.svg" alt="인스타그램">
              </a>
            </li>
            <li class="footer-snsitem">
              <a class="footer-snslink" href="javascript:void(0)">
                <img  src="/resources/icons/ico_youtube_lightgrey.svg" alt="유튜브">
              </a>
            </li>
            <li class="footer-snsitem">
              <a class="footer-snslink" href="javascript:void(0)">
                <img  src="/resources/icons/ico_facebook_lightgrey.svg" alt="페이스북">
              </a>
            </li>
            <li class="footer-snsitem">
              <a class="footer-snslink" href="javascript:void(0)">
                <img  src="/resources/icons/ico_kakao_lightgrey.svg" alt="카카오톡">
              </a>
            </li>
          </ul>
        </div>
         <div class="footer-bottom">
          <div class="footer-txt">
            <p> 성결대학교 성결관 301호 </p>
            <p>
              <span>T. 010-8246-6830</span>
              <span>E. wnflqm010203@sungkyul.ac.kr</span>
            </p>
          </div>
          <div class="footer-txt">
            <p>2024 BY JeongJunGyo. ALL RIGHTS RESEVED</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
       <script>
        function toggleAll(master) {
            document.querySelectorAll('input[name="nums"]').forEach(cb => cb.checked = master.checked);
        }
        function submitBulkDelete() {
            const checked = document.querySelectorAll('input[name="nums"]:checked');
            if (checked.length === 0) {
                alert('삭제할 상품을 선택하세요.'); return;
            }
            if (confirm('선택한 ' + checked.length + '개의 상품을 삭제하시겠습니까?')) {
                document.getElementById('bulkDeleteForm').submit();
            }
        }
        function deleteSingleItem(button) {
            const goodsNum = button.getAttribute('data-goods-num'); 
            if (confirm('상품번호 [' + goodsNum + '] 상품을 정말 삭제하시겠습니까?')) {
                const form = document.createElement('form');
                form.method = 'post';
                form.action = '/goods/delete';
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = 'nums';
                input.value = goodsNum;
                form.appendChild(input);
                document.body.appendChild(form);
                form.submit();
            }
        }
    </script>
  <!-- [E]basic-N4 -->
  <script  src="/resources/js/setting.js"></script>
  <script  src="/resources/js/plugin.js"></script>
  <script  src="/resources/js/template.js"></script>
  <script  src="/resources/js/common.js"></script>
  <script  src="/resources/js/script.js"></script>
</body>
</html>

